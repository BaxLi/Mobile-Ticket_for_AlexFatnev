<html>
<head>
<script  src="mobileticket-1.0.1.js"></script>

</head>
<body>
<h4>Mobile Ticket V 1.0 Verification Results</h4>
<div id="testResults">
</div>
<script type="text/javascript">
	
	var testResults = $("#testResults");
	testResults.innerHtml ="";
	
		
	var getStatusLabel = function(test){	
			if((test != undefined && test != false) || (test != undefined && test == true)){
				return "<span style='color:green'>PASS</span>";
			}else if(test == undefined || test == false){
				return "<span style='color:red'>FAIL</span>";
			}
	}
	
	MobileTicketAPI.init();
	
	for (var property in MobileTicketAPI) {
		if (MobileTicketAPI.hasOwnProperty(property)) {
			var test, state;
        
		    switch(property){			
			  case "getBranchesNearBy":			   
					MobileTicketAPI.setServiceSelection({"id":"2"});			  
			  		MobileTicketAPI.getBranchesNearBy(6.34455,34.55666,1,
						function(data){
						  $("#testResults").append("<h5><span>getBranchesNearBy  "+getStatusLabel($.isArray(data))+"</span></h5> ");
						},
						function(xhr, status, errorMsg){
						   $("#testResults").append("<h5><span>getBranchesNearBy  "+getStatusLabel(false)+"</span></h5> ");
						   console.log(errorMsg);
						}
					);					
			  break;
			  case "getAllBranches":
			        MobileTicketAPI.setServiceSelection({"id":"2"});	
					MobileTicketAPI.getAllBranches(
						function(data){
						   $("#testResults").append("<h5><span>getAllBranches  "+getStatusLabel($.isArray(data))+"</span></h5> ");
						},
						function(xhr, status, errorMsg){
						   $("#testResults").append("<h5><span>getAllBranches  "+getStatusLabel(false)+"</span></h5> ");
						   console.log(errorMsg);
						}
					);			
			  break;
			  case "getServices":
			        MobileTicketAPI.setBranchSelection({"id":"1"});	
					MobileTicketAPI.getServices(
						function(data){
						   $("#testResults").append("<h5><span>getServices  "+getStatusLabel($.isArray(data))+"</span></h5> ");
						},
						function(xhr, status, errorMsg){
						   $("#testResults").append("<h5><span>getServices  "+getStatusLabel(false)+"</span></h5> ");
						   console.log(errorMsg);
						}
					);			
			  break;
			  case "createVisit":
			        MobileTicketAPI.setServiceSelection({"id":"2"});	
			  		MobileTicketAPI.setBranchSelection({"id":"1"});
					MobileTicketAPI.createVisit(
						function(data){
						   $("#testResults").append("<h5><span>createVisit  "+getStatusLabel($.isPlainObject(data))+"</span></h5> ");
						}
					);		
			  break;
			  case "getVisitStatus":			       
			        MobileTicketAPI.createVisit(
						function(data){
							MobileTicketAPI.setVisit(1,2,data.visitId);
						    MobileTicketAPI.getVisitStatus(
								function(data){
								   $("#testResults").append("<h5><span>getVisitStatus  "+getStatusLabel($.isPlainObject(data))+"</span></h5> ");
								},
								function(xhr, status, errorMsg){
								   $("#testResults").append("<h5><span>getVisitStatus  "+getStatusLabel(false)+"</span></h5> ");
								   console.log(errorMsg);
								}
							);		
						}
					);		
			  		
			  break;
			  case "getQueueStatus":
			      MobileTicketAPI.setServiceSelection({"id":"2"});	
			  	  MobileTicketAPI.setBranchSelection({"id":"1"});
				  MobileTicketAPI.createVisit(
							function(data){
								MobileTicketAPI.getQueueStatus(
									function(data){
									   $("#testResults").append("<h5><span>getQueueStatus  "+getStatusLabel($.isArray(data))+"</span></h5> ");
									},
									function(xhr, status, errorMsg){
									   $("#testResults").append("<h5><span>getQueueStatus  "+getStatusLabel(false)+"</span></h5> ");
									   console.log(errorMsg);
									}
								  );		
						}
					);
			  break;
			  case "cancelVisit":
			        MobileTicketAPI.setServiceSelection({"id":"2"});	
			  		MobileTicketAPI.setBranchSelection({"id":"1"});
					MobileTicketAPI.createVisit(
						function(data){
						    MobileTicketAPI.cancelVisit(
								function(data){
								   $("#testResults").append("<h5><span>cancelVisit  "+getStatusLabel(true)+"</span></h5> ");
								},
								function(xhr, status, errorMsg){
								   $("#testResults").append("<h5><span>cancelVisit  "+getStatusLabel(false)+"</span></h5> ");
								   console.log(errorMsg);
								}
							);		
						}
					);		
			  		
			  break;
			  case "setBranchSelection":
			  		test	= MobileTicketAPI.setBranchSelection({"id":"1"});
			  break;
			  case "setServiceSelection":
			  		test	= MobileTicketAPI.setServiceSelection({"id":"2"});
			  break;
			  default:
			   continue;
			
			}
		}
	}

	
</script>
</body>
</html>